
var Redis = require("ioredis");
var servers = [{
  host: 'redis-0.redis',
  port: 6379, password: 'REDIS_PASS',
}, {
  host: 'redis-1.redis',
  port: 6379, password: 'REDIS_PASS',
},
  {
    host: 'redis-2.redis',
    port: 6379, password: 'REDIS_PASS',
  },
  {
    host: 'redis-3.redis',
    port: 6379, password: 'REDIS_PASS',
  },{
    host: 'redis-4.redis',
    port: 6379, password: 'REDIS_PASS',
  }
  ,{
    host: 'redis-5.redis',
    port: 6379, password: 'REDIS_PASS',
  }

];
const cluster = new Redis.Cluster(servers, {
  scaleReads: 'all'
});
cluster.on('connect', () => {
  console.log('[redis] connected');
  // resolve(client);
});
cluster.on('error', err => {
  console.error('[redis] error ', err);
  // reject(err);
});

cluster.set('test003','toto')
cluster.get("test002", function(err, res) {
  console.log('res',res);
});
